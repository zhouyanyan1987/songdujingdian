<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¦…æ„è¯µè¯» - å¿ƒå¢ƒå¦‚æ°´ï¼Œæ–‡å­—å¦‚ç¦…</title>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* ç¦…æ„è‰²å½©ç³»ç»Ÿ */
            --ink-green: #2D5A47;
            --rice-white: #FAF9F6;
            --pure-white: #FFFFFF;
            --deep-gray: #4A4A4A;
            --mid-gray: #888888;
            --light-gray: #EAEAEA;
            --gold-stone: #C0A062;
            --warning: #D97706;
            --error: #B91C1C;
            
            /* å¤œé—´æ¨¡å¼ */
            --dark-bg: #1C1C1E;
            --dark-card: #2D2D2F;
            --dark-text: #E2E2E2;
            --dark-green: #5E8B7E;
            
            /* é—´è·ç³»ç»Ÿ */
            --space-xs: 8px;
            --space-sm: 16px;
            --space-md: 24px;
            --space-lg: 32px;
            --space-xl: 48px;
            --space-xxl: 64px;
            --space-xxxl: 96px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Serif SC', serif;
            background-color: var(--rice-white);
            color: var(--deep-gray);
            line-height: 1.8;
            transition: all 0.3s ease;
            min-height: 100vh;
        }
        
        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }
        
        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 0 var(--space-xxl);
            min-height: 100vh;
        }
        
        /* æ ‡é¢˜å­—ä½“ */
        .zen-heading {
            font-family: 'ZCOOL QingKe HuangYou', cursive;
        }
        
        /* é¡µé¢åŸºç¡€æ ·å¼ */
        .page {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        
        .page.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }
        
        /* å¯¼èˆªæ  */
        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-xl) 0;
            margin-bottom: var(--space-xxl);
        }
        
        .nav-title {
            font-size: 36px;
            color: var(--ink-green);
            text-align: center;
            flex: 1;
        }
        
        .dark-mode .nav-title {
            color: var(--dark-green);
        }
        
        .nav-btn {
            width: 44px;
            height: 44px;
            border: none;
            background: transparent;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--deep-gray);
        }
        
        .nav-btn:hover {
            background-color: rgba(45, 90, 71, 0.1);
        }
        
        .dark-mode .nav-btn {
            color: var(--dark-text);
        }
        
        /* å¡ç‰‡æ ·å¼ */
        .zen-card {
            background: var(--pure-white);
            border-radius: 16px;
            padding: var(--space-lg) var(--space-md);
            margin-bottom: var(--space-md);
            box-shadow: 0 12px 24px rgba(45, 90, 71, 0.08);
            transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
            cursor: pointer;
            border: 1px solid rgba(45, 90, 71, 0.05);
        }
        
        .dark-mode .zen-card {
            background: var(--dark-card);
            border-color: rgba(94, 139, 126, 0.2);
        }
        
        .zen-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 16px 32px rgba(45, 90, 71, 0.12);
        }
        
        /* ä¹¦ç±å¡ç‰‡ç‰¹å®šæ ·å¼ */
        .book-title {
            font-size: 24px;
            color: var(--ink-green);
            margin-bottom: var(--space-sm);
        }
        
        .dark-mode .book-title {
            color: var(--dark-green);
        }
        
        .book-stats {
            color: var(--mid-gray);
            font-size: 14px;
            margin-bottom: var(--space-sm);
        }
        
        .dark-mode .book-stats {
            color: #AAAAAA;
        }
        
        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: var(--light-gray);
            border-radius: 4px;
            overflow: hidden;
            margin: var(--space-sm) 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--ink-green), #4A7C59);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .dark-mode .progress-fill {
            background: linear-gradient(90deg, var(--dark-green), #7FA894);
        }
        
        /* ç« èŠ‚åˆ—è¡¨ */
        .chapter-list {
            list-style: none;
        }
        
        .chapter-item {
            background: var(--pure-white);
            border: 1px solid var(--light-gray);
            border-radius: 16px;
            padding: var(--space-md);
            margin-bottom: var(--space-sm);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .dark-mode .chapter-item {
            background: var(--dark-card);
            border-color: rgba(94, 139, 126, 0.3);
        }
        
        .chapter-item:hover {
            border-color: var(--ink-green);
            background: rgba(45, 90, 71, 0.02);
        }
        
        .dark-mode .chapter-item:hover {
            border-color: var(--dark-green);
            background: rgba(94, 139, 126, 0.1);
        }
        
        .chapter-item.completed {
            background: linear-gradient(135deg, rgba(192, 160, 98, 0.1), rgba(192, 160, 98, 0.05));
            border-color: var(--gold-stone);
        }
        
        .dark-mode .chapter-item.completed {
            background: linear-gradient(135deg, rgba(192, 160, 98, 0.2), rgba(192, 160, 98, 0.1));
        }
        
        .chapter-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--deep-gray);
            margin-bottom: 4px;
        }
        
        .dark-mode .chapter-title {
            color: var(--dark-text);
        }
        
        .chapter-preview {
            font-size: 14px;
            color: var(--mid-gray);
        }
        
        .dark-mode .chapter-preview {
            color: #AAAAAA;
        }
        
        .chapter-count {
            font-size: 18px;
            font-weight: 700;
            color: var(--ink-green);
        }
        
        .dark-mode .chapter-count {
            color: var(--dark-green);
        }
        
        .chapter-item.completed .chapter-count {
            color: var(--gold-stone);
        }
        
        /* è¯µè¯»å†…å®¹åŒº */
        .reading-container {
            background: var(--pure-white);
            border-radius: 24px;
            padding: var(--space-xxl);
            margin-bottom: var(--space-xl);
            box-shadow: 0 12px 24px rgba(45, 90, 71, 0.08);
            min-height: 60vh;
            position: relative;
            overflow: hidden;
        }
        
        .dark-mode .reading-container {
            background: var(--dark-card);
        }
        
        .reading-content {
            font-size: 17px;
            line-height: 2;
            color: var(--deep-gray);
            text-align: center;
            margin-bottom: var(--space-xl);
            letter-spacing: 0.5px;
        }
        
        .dark-mode .reading-content {
            color: var(--dark-text);
        }
        
        /* è¿›åº¦æ˜¾ç¤º */
        .progress-display {
            text-align: center;
            margin: var(--space-xl) 0;
        }
        
        .progress-number {
            font-size: 72px;
            font-weight: 700;
            color: var(--ink-green);
            line-height: 1;
            margin-bottom: var(--space-sm);
        }
        
        .dark-mode .progress-number {
            color: var(--dark-green);
        }
        
        .progress-goal {
            font-size: 16px;
            color: var(--mid-gray);
        }
        
        .dark-mode .progress-goal {
            color: #AAAAAA;
        }
        
        /* æµ®åŠ¨æ‰“å¡æŒ‰é’® */
        .floating-check-btn {
            position: fixed;
            bottom: var(--space-xl);
            right: var(--space-xl);
            width: 72px;
            height: 72px;
            background: var(--ink-green);
            border: none;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(45, 90, 71, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .dark-mode .floating-check-btn {
            background: var(--dark-green);
            box-shadow: 0 8px 24px rgba(94, 139, 126, 0.3);
        }
        
        .floating-check-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 32px rgba(45, 90, 71, 0.4);
        }
        
        .dark-mode .floating-check-btn:hover {
            box-shadow: 0 12px 32px rgba(94, 139, 126, 0.4);
        }
        
        .floating-check-btn:active {
            transform: scale(0.95);
        }
        
        /* æ°´å¢¨æ‰©æ•£æ•ˆæœ */
        .ink-ripple {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(45, 90, 71, 0.2) 0%, rgba(45, 90, 71, 0.1) 50%, transparent 100%);
            pointer-events: none;
            animation: rippleExpand 0.6s ease-out;
        }
        
        @keyframes rippleExpand {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 0;
            }
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .zen-btn {
            padding: var(--space-sm) var(--space-lg);
            border: none;
            border-radius: 16px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        .btn-primary {
            background: var(--ink-green);
            color: var(--pure-white);
        }
        
        .dark-mode .btn-primary {
            background: var(--dark-green);
        }
        
        .btn-primary:hover {
            background: #1e4a37;
            transform: translateY(-2px);
        }
        
        .dark-mode .btn-primary:hover {
            background: #4a7561;
        }
        
        .btn-secondary {
            background: var(--pure-white);
            color: var(--deep-gray);
            border: 1px solid var(--light-gray);
        }
        
        .dark-mode .btn-secondary {
            background: var(--dark-card);
            color: var(--dark-text);
            border-color: rgba(94, 139, 126, 0.3);
        }
        
        .btn-secondary:hover {
            border-color: var(--ink-green);
            background: rgba(45, 90, 71, 0.02);
        }
        
        .dark-mode .btn-secondary:hover {
            border-color: var(--dark-green);
            background: rgba(94, 139, 126, 0.1);
        }
        
        .btn-full {
            width: 100%;
        }
        
        /* è¡¨å•è¾“å…¥ */
        .zen-input {
            width: 100%;
            padding: var(--space-sm) var(--space-md);
            border: 2px solid var(--light-gray);
            border-radius: 16px;
            font-size: 16px;
            font-family: inherit;
            background: var(--pure-white);
            color: var(--deep-gray);
            transition: all 0.3s ease;
        }
        
        .dark-mode .zen-input {
            background: var(--dark-card);
            color: var(--dark-text);
            border-color: rgba(94, 139, 126, 0.3);
        }
        
        .zen-input:focus {
            outline: none;
            border-color: var(--ink-green);
            box-shadow: 0 0 0 3px rgba(45, 90, 71, 0.1);
        }
        
        .dark-mode .zen-input:focus {
            border-color: var(--dark-green);
            box-shadow: 0 0 0 3px rgba(94, 139, 126, 0.1);
        }
        
        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            backdrop-filter: blur(8px);
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--pure-white);
            border-radius: 24px;
            padding: var(--space-xl);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
        }
        
        .dark-mode .modal-content {
            background: var(--dark-card);
        }
        
        /* åº†ç¥åŠ¨ç”» */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(250, 249, 246, 0.95);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            backdrop-filter: blur(10px);
        }
        
        .dark-mode .celebration-overlay {
            background: rgba(28, 28, 30, 0.95);
        }
        
        .celebration-content {
            text-align: center;
            animation: celebrationFadeIn 0.8s ease-out;
        }
        
        @keyframes celebrationFadeIn {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .celebration-text {
            font-size: 48px;
            color: var(--gold-stone);
            margin-bottom: var(--space-lg);
            font-family: 'ZCOOL QingKe HuangYou', cursive;
        }
        
        /* é‡‘è‰²ç²’å­ */
        .golden-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            background: var(--gold-stone);
            border-radius: 50%;
            pointer-events: none;
            animation: goldenFloat 3s ease-out;
        }
        
        @keyframes goldenFloat {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-200px) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* ç©ºçŠ¶æ€ */
        .empty-state {
            text-align: center;
            padding: var(--space-xxxl) var(--space-md);
            color: var(--mid-gray);
        }
        
        .dark-mode .empty-state {
            color: #AAAAAA;
        }
        
        /* æ•°æ®å¤‡ä»½åŒºåŸŸ */
        .backup-section {
            background: var(--pure-white);
            border-radius: 16px;
            padding: var(--space-lg);
            margin-bottom: var(--space-md);
            border: 1px dashed var(--light-gray);
        }
        
        .dark-mode .backup-section {
            background: var(--dark-card);
            border-color: rgba(94, 139, 126, 0.3);
        }
        
        /* ç»Ÿè®¡é¢æ¿ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: var(--space-md);
            margin-bottom: var(--space-xl);
        }
        
        .stat-card {
            background: var(--pure-white);
            border-radius: 16px;
            padding: var(--space-md);
            text-align: center;
            box-shadow: 0 4px 12px rgba(45, 90, 71, 0.05);
        }
        
        .dark-mode .stat-card {
            background: var(--dark-card);
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: 700;
            color: var(--ink-green);
            margin-bottom: 4px;
        }
        
        .dark-mode .stat-number {
            color: var(--dark-green);
        }
        
        .stat-label {
            font-size: 14px;
            color: var(--mid-gray);
        }
        
        .dark-mode .stat-label {
            color: #AAAAAA;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 0 var(--space-md);
            }
            
            .nav-bar {
                padding: var(--space-lg) 0;
                margin-bottom: var(--space-lg);
            }
            
            .nav-title {
                font-size: 28px;
            }
            
            .reading-container {
                padding: var(--space-lg);
                margin-bottom: var(--space-lg);
            }
            
            .floating-check-btn {
                bottom: var(--space-lg);
                right: var(--space-lg);
            }
        }
        
        /* éšè—å…ƒç´  */
        .hidden {
            display: none !important;
        }
        
        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--light-gray);
            border-radius: 50%;
            border-top-color: var(--ink-green);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¦–é¡µï¼šä¹¦ç±åˆ—è¡¨ -->
        <div id="home-page" class="page active">
            <div class="nav-bar">
                <div style="width: 44px;"></div>
                <h1 class="nav-title zen-heading">ç¦…æ„è¯µè¯»</h1>
                <button class="nav-btn" onclick="showSettingsModal()" title="è®¾ç½®">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.69 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,18.38L11.24,20H12.76L13.13,18.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"/>
                    </svg>
                </button>
            </div>
            
            <!-- ç»Ÿè®¡æ¦‚è§ˆ -->
            <div id="stats-overview" class="stats-grid">
                <!-- ç»Ÿè®¡å¡ç‰‡å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div id="books-container">
                <!-- ä¹¦ç±åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
            
            <div id="empty-state" class="empty-state">
                <p style="margin-bottom: 16px;">ä¹¦å·å¤šæƒ…ä¼¼æ•…äºº</p>
                <p>æ™ºæ…§çš„å…‰èŠ’åœ¨æ–‡å­—ä¸­é™é™æµæ·Œ</p>
            </div>
        </div>

        <!-- ä¹¦ç±è¯¦æƒ…é¡µ -->
        <div id="book-detail-page" class="page">
            <div class="nav-bar">
                <button class="nav-btn" onclick="showHome()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                    </svg>
                </button>
                <h2 class="nav-title zen-heading" id="book-title">ä¹¦å</h2>
                <button class="nav-btn" onclick="showBookStats()" title="ç»Ÿè®¡">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3,3V21H21V3H3M19,19H5V5H19V19M16,16V13H13V16H16M11,16V8H8V16H11M6,16V10H3V16H6Z"/>
                    </svg>
                </button>
            </div>
            
            <div id="chapters-container">
                <!-- ç« èŠ‚åˆ—è¡¨å°†åœ¨è¿™é‡ŒåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>

        <!-- è¯µè¯»é¡µé¢ -->
        <div id="reading-page" class="page">
            <div class="nav-bar">
                <button class="nav-btn" onclick="goBackToBook()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"/>
                    </svg>
                </button>
                <h3 class="nav-title zen-heading" id="chapter-title">ç« èŠ‚æ ‡é¢˜</h3>
                <button class="nav-btn" onclick="showResetConfirm()" title="é‡ç½®">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12,6V9L16,5L12,1V4A8,8 0 0,0 4,12H2A10,10 0 0,1 12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22C10.03,22 8.2,21.43 6.65,20.45L2,22L3.55,17.35C2.57,15.8 2,13.97 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12H6A6,6 0 0,1 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18V15L8,19L12,23V20A8,8 0 0,0 20,12A8,8 0 0,0 12,4Z"/>
                    </svg>
                </button>
            </div>
            
            <div class="reading-container">
                <div class="progress-display">
                    <div class="progress-number" id="current-count">0</div>
                    <div class="progress-goal">ç›®æ ‡ï¼šè¯µè¯» 100 é</div>
                </div>
                
                <div class="reading-content" id="chapter-content">
                    <!-- ç« èŠ‚å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                </div>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨æ‰“å¡æŒ‰é’® -->
    <button class="floating-check-btn" onclick="incrementReading()" title="å®Œæˆä¸€éè¯µè¯»">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
        </svg>
    </button>

    <!-- è®¾ç½®æ¨¡æ€æ¡† -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <h3 class="zen-heading" style="color: var(--ink-green); margin-bottom: 24px;">è®¾ç½®</h3>
            
            <!-- ä¸»é¢˜åˆ‡æ¢ -->
            <div style="margin-bottom: 24px;">
                <label style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <span>ä¸»é¢˜æ¨¡å¼</span>
                    <button class="zen-btn btn-secondary" onclick="toggleTheme()" id="theme-toggle">
                        åˆ‡æ¢åˆ°å¤œé—´æ¨¡å¼
                    </button>
                </label>
            </div>
            
            <!-- æ•°æ®ç®¡ç† -->
            <div class="backup-section">
                <h4 style="margin-bottom: 16px; color: var(--ink-green);">æ•°æ®å¤‡ä»½ä¸æ¢å¤</h4>
                <p style="margin-bottom: 16px; color: var(--mid-gray); font-size: 14px;">
                    å¯¼å‡ºæ•°æ®ç”¨äºè·¨è®¾å¤‡åŒæ­¥ï¼Œæˆ–æ¢å¤ä¹‹å‰å¤‡ä»½çš„æ•°æ®
                </p>
                <div style="display: flex; gap: 12px; flex-wrap: wrap;">
                    <button class="zen-btn btn-primary" onclick="exportData()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        å¯¼å‡ºæ•°æ®
                    </button>
                    <button class="zen-btn btn-secondary" onclick="document.getElementById('import-file').click()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
                            <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"/>
                        </svg>
                        å¯¼å…¥æ•°æ®
                    </button>
                    <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importData(event)">
                </div>
            </div>
            
            <!-- æ·»åŠ è‡ªå®šä¹‰ä¹¦ç± -->
            <div style="margin-bottom: 24px;">
                <h4 style="margin-bottom: 16px; color: var(--ink-green);">æ·»åŠ è‡ªå®šä¹‰ä¹¦ç±</h4>
                <button class="zen-btn btn-secondary btn-full" onclick="showAddBookModal()">
                    æ·»åŠ æ–°çš„ç»å…¸ä¹¦ç±
                </button>
            </div>
            
            <div style="text-align: center;">
                <button class="zen-btn btn-primary" onclick="hideSettingsModal()">å…³é—­</button>
            </div>
        </div>
    </div>

    <!-- æ·»åŠ ä¹¦ç±æ¨¡æ€æ¡† -->
    <div id="add-book-modal" class="modal">
        <div class="modal-content">
            <h3 class="zen-heading" style="color: var(--ink-green); margin-bottom: 24px;">æ·»åŠ ç»å…¸ä¹¦ç±</h3>
            <form id="add-book-form">
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">ä¹¦ç±åç§°</label>
                    <input type="text" class="zen-input" id="book-name" placeholder="ä¾‹å¦‚ï¼šã€Šé™å¿ƒå½•ã€‹" required>
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600;">é¦–ç« å†…å®¹</label>
                    <textarea class="zen-input" id="chapter-content-input" rows="4" style="padding: 16px; height: auto; resize: vertical;" placeholder="è¯·è¾“å…¥ç¬¬ä¸€ç« èŠ‚çš„å†…å®¹..."></textarea>
                    <p class="caption" style="margin-top: 8px; font-size: 14px;">æ‚¨å¯ä»¥å…ˆæ·»åŠ ç¬¬ä¸€ç« èŠ‚ï¼Œåç»­åœ¨ä¹¦ç±è¯¦æƒ…é¡µç»§ç»­æ·»åŠ æ›´å¤šç« èŠ‚</p>
                </div>
                <div style="display: flex; gap: 12px;">
                    <button type="button" class="zen-btn btn-secondary" onclick="hideAddBookModal()" style="flex: 1;">å–æ¶ˆ</button>
                    <button type="submit" class="zen-btn btn-primary" style="flex: 1;">æ·»åŠ ä¹¦ç±</button>
                </div>
            </form>
        </div>
    </div>

    <!-- é‡ç½®ç¡®è®¤æ¨¡æ€æ¡† -->
    <div id="reset-modal" class="modal">
        <div class="modal-content">
            <h3 class="zen-heading" style="color: var(--ink-green); margin-bottom: 16px;">é‡ç½®è¿›åº¦</h3>
            <p style="margin-bottom: 24px;">ç¡®å®šè¦é‡ç½®å½“å‰ç« èŠ‚çš„è¯»æ•°è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚</p>
            <div style="display: flex; gap: 12px;">
                <button type="button" class="zen-btn btn-secondary" onclick="hideResetConfirm()" style="flex: 1;">å–æ¶ˆ</button>
                <button type="button" class="zen-btn" onclick="resetChapterProgress()" style="flex: 1; background: var(--error); color: white;">ç¡®è®¤é‡ç½®</button>
            </div>
        </div>
    </div>

    <!-- åº†ç¥åŠ¨ç”»è¦†ç›–å±‚ -->
    <div id="celebration-overlay" class="celebration-overlay">
        <div class="celebration-content">
            <div class="celebration-text zen-heading">åœ†æ»¡</div>
            <p style="color: var(--mid-gray); margin-bottom: 16px;">ğŸ‰ æ­å–œï¼æœ¬ç« å·²å®Œæˆ100éè¯µè¯»ï¼</p>
        </div>
    </div>

    <script>
        // å…¨å±€æ•°æ®å­˜å‚¨
        let books = JSON.parse(localStorage.getItem('zenReadingBooks') || '[]');
        let currentBookId = null;
        let currentChapterIndex = 0;
        let isDarkMode = localStorage.getItem('darkMode') === 'true';

        // é¢„ç½®ç»å…¸ä¹¦ç±æ•°æ®
        const classicBooks = [
            {
                id: 'lunyu',
                name: 'ã€Šè®ºè¯­ã€‹',
                author: 'å­”å­',
                description: 'å„’å®¶ç»å…¸ï¼Œå›å­ä¹‹é“',
                chapters: [
                    {
                        title: 'å­¦è€Œæ—¶ä¹ ä¹‹',
                        content: 'å­æ›°ï¼š"å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹ï¼Ÿæœ‰æœ‹è‡ªè¿œæ–¹æ¥ï¼Œä¸äº¦ä¹ä¹ï¼Ÿäººä¸çŸ¥è€Œä¸æ„ ï¼Œä¸äº¦å›å­ä¹ï¼Ÿ"',
                        readCount: 25
                    },
                    {
                        title: 'ä¸ºæ”¿ä»¥å¾·',
                        content: 'å­æ›°ï¼š"ä¸ºæ”¿ä»¥å¾·ï¼Œè­¬å¦‚åŒ—è¾°ï¼Œå±…å…¶æ‰€è€Œä¼—æ˜Ÿå…±ä¹‹ã€‚"',
                        readCount: 0
                    },
                    {
                        title: 'å¾æ—¥ä¸‰çœå¾èº«',
                        content: 'æ›¾å­æ›°ï¼š"å¾æ—¥ä¸‰çœå¾èº«ï¼šä¸ºäººè°‹è€Œä¸å¿ ä¹ï¼Ÿä¸æœ‹å‹äº¤è€Œä¸ä¿¡ä¹ï¼Ÿä¼ ä¸ä¹ ä¹ï¼Ÿ"',
                        readCount: 15
                    },
                    {
                        title: 'å·§è¨€ä»¤è‰²',
                        content: 'å­æ›°ï¼š"å·§è¨€ä»¤è‰²ï¼Œé²œçŸ£ä»ã€‚"',
                        readCount: 0
                    },
                    {
                        title: 'é“åƒä¹˜ä¹‹å›½',
                        content: 'å­æ›°ï¼š"é“åƒä¹˜ä¹‹å›½ï¼Œæ•¬äº‹è€Œä¿¡ï¼ŒèŠ‚ç”¨è€Œçˆ±äººï¼Œä½¿æ°‘ä»¥æ—¶ã€‚"',
                        readCount: 8
                    },
                    {
                        title: 'å¼Ÿå­å…¥åˆ™å­',
                        content: 'å­æ›°ï¼š"å¼Ÿå­ï¼Œå…¥åˆ™å­ï¼Œå‡ºåˆ™æ‚Œï¼Œè°¨è€Œä¿¡ï¼Œæ³›çˆ±ä¼—ï¼Œè€Œäº²ä»ã€‚è¡Œæœ‰ä½™åŠ›ï¼Œåˆ™ä»¥å­¦æ–‡ã€‚"',
                        readCount: 0
                    },
                    {
                        title: 'å­å¤é—®å­',
                        content: 'å­å¤é—®å­ã€‚å­æ›°ï¼š"è‰²éš¾ã€‚æœ‰äº‹ï¼Œå¼Ÿå­æœå…¶åŠ³ï¼›æœ‰é…’é£Ÿï¼Œå…ˆç”Ÿé¦”ï¼Œæ›¾æ˜¯ä»¥ä¸ºå­ä¹ï¼Ÿ"',
                        readCount: 12
                    },
                    {
                        title: 'æ¸©æ•…è€ŒçŸ¥æ–°',
                        content: 'å­æ›°ï¼š"æ¸©æ•…è€ŒçŸ¥æ–°ï¼Œå¯ä»¥ä¸ºå¸ˆçŸ£ã€‚"',
                        readCount: 0
                    }
                ]
            },
            {
                id: 'daodejing',
                name: 'ã€Šé“å¾·ç»ã€‹',
                author: 'è€å­',
                description: 'é“å®¶ç»å…¸ï¼Œæ— ä¸ºè€Œæ²»',
                chapters: [
                    {
                        title: 'ç¬¬ä¸€ç« ',
                        content: 'é“å¯é“ï¼Œéå¸¸é“ï¼›åå¯åï¼Œéå¸¸åã€‚æ— åï¼Œå¤©åœ°ä¹‹å§‹ï¼›æœ‰åï¼Œä¸‡ç‰©ä¹‹æ¯ã€‚æ•…å¸¸æ— æ¬²ï¼Œä»¥è§‚å…¶å¦™ï¼›å¸¸æœ‰æ¬²ï¼Œä»¥è§‚å…¶å¾¼ã€‚æ­¤ä¸¤è€…ï¼ŒåŒå‡ºè€Œå¼‚åï¼ŒåŒè°“ä¹‹ç„ã€‚ç„ä¹‹åˆç„ï¼Œä¼—å¦™ä¹‹é—¨ã€‚',
                        readCount: 30
                    },
                    {
                        title: 'ç¬¬äºŒç« ',
                        content: 'å¤©ä¸‹çš†çŸ¥ç¾ä¹‹ä¸ºç¾ï¼Œæ–¯æ¶å·²ï¼›çš†çŸ¥å–„ä¹‹ä¸ºå–„ï¼Œæ–¯ä¸å–„å·²ã€‚æ•…æœ‰æ— ç›¸ç”Ÿï¼Œéš¾æ˜“ç›¸æˆï¼Œé•¿çŸ­ç›¸å½¢ï¼Œé«˜ä¸‹ç›¸å€¾ï¼ŒéŸ³å£°ç›¸å’Œï¼Œå‰åç›¸éšã€‚æ˜¯ä»¥åœ£äººå¤„æ— ä¸ºä¹‹äº‹ï¼Œè¡Œä¸è¨€ä¹‹æ•™ã€‚',
                        readCount: 0
                    },
                    {
                        title: 'ç¬¬ä¸‰ç« ',
                        content: 'ä¸å°šè´¤ï¼Œä½¿æ°‘ä¸äº‰ï¼›ä¸è´µéš¾å¾—ä¹‹è´§ï¼Œä½¿æ°‘ä¸ä¸ºç›—ï¼›ä¸è§å¯æ¬²ï¼Œä½¿æ°‘å¿ƒä¸ä¹±ã€‚æ˜¯ä»¥åœ£äººä¹‹æ²»ï¼Œè™šå…¶å¿ƒï¼Œå®å…¶è…¹ï¼Œå¼±å…¶å¿—ï¼Œå¼ºå…¶éª¨ï¼Œå¸¸ä½¿æ°‘æ— çŸ¥æ— æ¬²ã€‚',
                        readCount: 18
                    },
                    {
                        title: 'ç¬¬å››ç« ',
                        content: 'é“å†²ï¼Œè€Œç”¨ä¹‹æˆ–ä¸ç›ˆã€‚æ¸Šå…®ï¼Œä¼¼ä¸‡ç‰©ä¹‹å®—ï¼›æŒ«å…¶é”ï¼Œè§£å…¶çº·ï¼Œå’Œå…¶å…‰ï¼ŒåŒå…¶å°˜ï¼Œæ¹›å…®ï¼Œä¼¼æˆ–å­˜ã€‚å¾ä¸çŸ¥è°ä¹‹å­ï¼Œè±¡å¸ä¹‹å…ˆã€‚',
                        readCount: 0
                    },
                    {
                        title: 'ç¬¬äº”ç« ',
                        content: 'å¤©åœ°ä¸ä»ï¼Œä»¥ä¸‡ç‰©ä¸ºåˆç‹—ï¼›åœ£äººä¸ä»ï¼Œä»¥ç™¾å§“ä¸ºåˆç‹—ã€‚å¤©åœ°ä¹‹é—´ï¼Œå…¶çŠ¹æ©ç±¥ä¹ï¼Ÿè™šè€Œä¸å±ˆï¼ŒåŠ¨è€Œæ„ˆå‡ºã€‚å¤šè¨€æ•°ç©·ï¼Œä¸å¦‚å®ˆä¸­ã€‚',
                        readCount: 22
                    },
                    {
                        title: 'ç¬¬å…«ç« ',
                        content: 'ä¸Šå–„è‹¥æ°´ã€‚æ°´å–„åˆ©ä¸‡ç‰©è€Œä¸äº‰ï¼Œå¤„ä¼—äººä¹‹æ‰€æ¶ï¼Œæ•…å‡ äºé“ã€‚å±…å–„åœ°ï¼Œå¿ƒå–„æ¸Šï¼Œä¸å–„ä»ï¼Œè¨€å–„ä¿¡ï¼Œæ”¿å–„æ²»ï¼Œäº‹å–„èƒ½ï¼ŒåŠ¨å–„æ—¶ã€‚å¤«å”¯ä¸äº‰ï¼Œæ•…æ— å°¤ã€‚',
                        readCount: 0
                    },
                    {
                        title: 'ç¬¬äºŒåäº”ç« ',
                        content: 'æœ‰ç‰©æ··æˆï¼Œå…ˆå¤©åœ°ç”Ÿã€‚å¯‚å…®å¯¥å…®ï¼Œç‹¬ç«‹è€Œä¸æ”¹ï¼Œå‘¨è¡Œè€Œä¸æ®†ï¼Œå¯ä»¥ä¸ºå¤©ä¸‹æ¯ã€‚å¾ä¸çŸ¥å…¶åï¼Œå­—ä¹‹æ›°é“ï¼Œå¼ºä¸ºä¹‹åæ›°å¤§ã€‚',
                        readCount: 5
                    },
                    {
                        title: 'ç¬¬å…«åä¸€ç« ',
                        content: 'ä¿¡è¨€ä¸ç¾ï¼Œç¾è¨€ä¸ä¿¡ã€‚å–„è€…ä¸è¾©ï¼Œè¾©è€…ä¸å–„ã€‚çŸ¥è€…ä¸åšï¼Œåšè€…ä¸çŸ¥ã€‚åœ£äººä¸ç§¯ï¼Œæ—¢ä»¥ä¸ºäººå·±æ„ˆæœ‰ï¼Œæ—¢ä»¥ä¸äººå·±æ„ˆå¤šã€‚',
                        readCount: 0
                    }
                ]
            },
            {
                id: 'daxue',
                name: 'ã€Šå¤§å­¦ã€‹',
                author: 'æ›¾å­',
                description: 'å„’å®¶ä¿®èº«é½å®¶æ²»å›½å¹³å¤©ä¸‹',
                chapters: [
                    {
                        title: 'å¤§å­¦ä¹‹é“',
                        content: 'å¤§å­¦ä¹‹é“ï¼Œåœ¨æ˜æ˜å¾·ï¼Œåœ¨äº²æ°‘ï¼Œåœ¨æ­¢äºè‡³å–„ã€‚çŸ¥æ­¢è€Œåæœ‰å®šï¼Œå®šè€Œåèƒ½é™ï¼Œé™è€Œåèƒ½å®‰ï¼Œå®‰è€Œåèƒ½è™‘ï¼Œè™‘è€Œåèƒ½å¾—ã€‚ç‰©æœ‰æœ¬æœ«ï¼Œäº‹æœ‰ç»ˆå§‹ï¼ŒçŸ¥æ‰€å…ˆåï¼Œåˆ™è¿‘é“çŸ£ã€‚',
                        readCount: 40
                    },
                    {
                        title: 'æ ¼ç‰©è‡´çŸ¥',
                        content: 'å¤ä¹‹æ¬²æ˜æ˜å¾·äºå¤©ä¸‹è€…ï¼Œå…ˆæ²»å…¶å›½ï¼›æ¬²æ²»å…¶å›½è€…ï¼Œå…ˆé½å…¶å®¶ï¼›æ¬²é½å…¶å®¶è€…ï¼Œå…ˆä¿®å…¶èº«ï¼›æ¬²ä¿®å…¶èº«è€…ï¼Œå…ˆæ­£å…¶å¿ƒï¼›æ¬²æ­£å…¶å¿ƒè€…ï¼Œå…ˆè¯šå…¶æ„ï¼›æ¬²è¯šå…¶æ„è€…ï¼Œå…ˆè‡´å…¶çŸ¥ï¼›è‡´çŸ¥åœ¨æ ¼ç‰©ã€‚',
                        readCount: 15
                    },
                    {
                        title: 'è¯šæ„æ­£å¿ƒ',
                        content: 'æ‰€è°“è¯šå…¶æ„è€…ï¼Œæ¯‹è‡ªæ¬ºä¹Ÿã€‚å¦‚æ¶æ¶è‡­ï¼Œå¦‚å¥½å¥½è‰²ï¼Œæ­¤ä¹‹è°“è‡ªè°¦ã€‚æ•…å›å­å¿…æ…å…¶ç‹¬ä¹Ÿã€‚å°äººé—²å±…ä¸ºä¸å–„ï¼Œæ— æ‰€ä¸è‡³ï¼Œè§å›å­è€ŒååŒç„¶ï¼Œæ©å…¶ä¸å–„ï¼Œè€Œè‘—å…¶å–„ã€‚',
                        readCount: 0
                    },
                    {
                        title: 'ä¿®èº«é½å®¶',
                        content: 'æ‰€è°“ä¿®èº«åœ¨æ­£å…¶å¿ƒè€…ï¼Œèº«æœ‰æ‰€æ„¤æ‡¥ï¼Œåˆ™ä¸å¾—å…¶æ­£ï¼›æœ‰æ‰€ææƒ§ï¼Œåˆ™ä¸å¾—å…¶æ­£ï¼›æœ‰æ‰€å¥½ä¹ï¼Œåˆ™ä¸å¾—å…¶æ­£ï¼›æœ‰æ‰€å¿§æ‚£ï¼Œåˆ™ä¸å¾—å…¶æ­£ã€‚å¿ƒä¸åœ¨ç„‰ï¼Œè§†è€Œä¸è§ï¼Œå¬è€Œä¸é—»ï¼Œé£Ÿè€Œä¸çŸ¥å…¶å‘³ã€‚æ­¤è°“ä¿®èº«åœ¨æ­£å…¶å¿ƒã€‚',
                        readCount: 8
                    },
                    {
                        title: 'æ­¢äºè‡³å–„',
                        content: 'ã€Šè¯—ã€‹äº‘ï¼š"ç»å½¼æ·‡æ¾³ï¼Œè‰ç«¹çŒ—çŒ—ã€‚æœ‰æ–å›å­ï¼Œå¦‚åˆ‡å¦‚ç£‹ï¼Œå¦‚ç¢å¦‚ç£¨ã€‚ç‘Ÿå…®åƒ©å…®ï¼Œèµ«å…®å–§å…®ã€‚æœ‰æ–å›å­ï¼Œç»ˆä¸å¯è« å…®ï¼"å¦‚åˆ‡å¦‚ç£‹è€…ï¼Œé“å­¦ä¹Ÿï¼›å¦‚ç¢å¦‚ç£¨è€…ï¼Œè‡ªä¿®ä¹Ÿï¼›ç‘Ÿå…®åƒ©å…®è€…ï¼Œæ‚æ —ä¹Ÿï¼›èµ«å…®å–§å…®è€…ï¼Œå¨ä»ªä¹Ÿï¼›æœ‰æ–å›å­ï¼Œç»ˆä¸å¯è« å…®è€…ï¼Œé“ç››å¾·è‡³å–„ï¼Œæ°‘ä¹‹ä¸èƒ½å¿˜ä¹Ÿã€‚',
                        readCount: 0
                    }
                ]
            },
            {
                id: 'zhongyong',
                name: 'ã€Šä¸­åº¸ã€‹',
                author: 'å­æ€',
                description: 'ä¸­æ­£å¹³å’Œï¼Œä¸åä¸å€š',
                chapters: [
                    {
                        title: 'ç¬¬ä¸€ç« ',
                        content: 'å¤©å‘½ä¹‹è°“æ€§ï¼Œç‡æ€§ä¹‹è°“é“ï¼Œä¿®é“ä¹‹è°“æ•™ã€‚é“ä¹Ÿè€…ï¼Œä¸å¯é¡»è‡¾ç¦»ä¹Ÿï¼Œå¯ç¦»éé“ä¹Ÿã€‚æ˜¯æ•…å›å­æˆ’æ…ä¹å…¶æ‰€ä¸ç¹ï¼Œææƒ§ä¹å…¶æ‰€ä¸é—»ã€‚è«è§ä¹éšï¼Œè«æ˜¾ä¹å¾®ï¼Œæ•…å›å­æ…å…¶ç‹¬ä¹Ÿã€‚',
                        readCount: 20
                    },
                    {
                        title: 'ç¬¬äºŒç« ',
                        content: 'ä»²å°¼æ›°ï¼š"å›å­ä¸­åº¸ï¼Œå°äººåä¸­åº¸ã€‚å›å­ä¹‹ä¸­åº¸ä¹Ÿï¼Œå›å­è€Œæ—¶ä¸­ï¼›å°äººä¹‹ä¸­åº¸ä¹Ÿï¼Œå°äººè€Œæ— å¿Œæ†šä¹Ÿã€‚"',
                        readCount: 0
                    },
                    {
                        title: 'ç¬¬ä¸‰ç« ',
                        content: 'å­æ›°ï¼š"ä¸­åº¸ä¹‹ä¸ºå¾·ä¹Ÿï¼Œå…¶è‡³çŸ£ä¹ï¼æ°‘é²œä¹…çŸ£ã€‚"',
                        readCount: 12
                    },
                    {
                        title: 'ç¬¬åäºŒç« ',
                        content: 'å›å­ä¹‹é“ï¼Œè´¹è€Œéšã€‚å¤«å¦‡ä¹‹æ„šï¼Œå¯ä»¥ä¸çŸ¥ç„‰ï¼ŒåŠå…¶è‡³ä¹Ÿï¼Œè™½åœ£äººäº¦æœ‰æ‰€ä¸çŸ¥ç„‰ã€‚å¤«å¦‡ä¹‹ä¸è‚–ï¼Œå¯ä»¥èƒ½è¡Œç„‰ï¼ŒåŠå…¶è‡³ä¹Ÿï¼Œè™½åœ£äººäº¦æœ‰æ‰€ä¸èƒ½ç„‰ã€‚',
                        readCount: 0
                    },
                    {
                        title: 'ç¬¬äºŒåç« ',
                        content: 'å‡¡ä¸ºå¤©ä¸‹å›½å®¶æœ‰ä¹ç»ï¼Œæ›°ï¼šä¿®èº«ä¹Ÿï¼Œå°Šè´¤ä¹Ÿï¼Œäº²äº²ä¹Ÿï¼Œæ•¬å¤§è‡£ä¹Ÿï¼Œä½“ç¾¤è‡£ä¹Ÿï¼Œå­åº¶æ°‘ä¹Ÿï¼Œæ¥ç™¾å·¥ä¹Ÿï¼ŒæŸ”è¿œäººä¹Ÿï¼Œæ€€è¯¸ä¾¯ä¹Ÿã€‚',
                        readCount: 6
                    }
                ]
            },
            {
                id: 'shijing',
                name: 'ã€Šè¯—ç»ã€‹',
                author: 'ä½šå',
                description: 'ä¸­å›½æœ€æ—©çš„è¯—æ­Œæ€»é›†',
                chapters: [
                    {
                        title: 'å…³é›',
                        content: 'å…³å…³é›é¸ ï¼Œåœ¨æ²³ä¹‹æ´²ã€‚çªˆçª•æ·‘å¥³ï¼Œå›å­å¥½é€‘ã€‚å‚å·®è‡èœï¼Œå·¦å³æµä¹‹ã€‚çªˆçª•æ·‘å¥³ï¼Œå¯¤å¯æ±‚ä¹‹ã€‚æ±‚ä¹‹ä¸å¾—ï¼Œå¯¤å¯æ€æœã€‚æ‚ å“‰æ‚ å“‰ï¼Œè¾—è½¬åä¾§ã€‚å‚å·®è‡èœï¼Œå·¦å³é‡‡ä¹‹ã€‚çªˆçª•æ·‘å¥³ï¼Œç´ç‘Ÿå‹ä¹‹ã€‚å‚å·®è‡èœï¼Œå·¦å³èŠ¼ä¹‹ã€‚çªˆçª•æ·‘å¥³ï¼Œé’Ÿé¼“ä¹ä¹‹ã€‚',
                        readCount: 35
                    },
                    {
                        title: 'è’¹è‘­',
                        content: 'è’¹è‘­è‹è‹ï¼Œç™½éœ²ä¸ºéœœã€‚æ‰€è°“ä¼Šäººï¼Œåœ¨æ°´ä¸€æ–¹ã€‚æº¯æ´„ä»ä¹‹ï¼Œé“é˜»ä¸”é•¿ã€‚æº¯æ¸¸ä»ä¹‹ï¼Œå®›åœ¨æ°´ä¸­å¤®ã€‚è’¹è‘­è‹è‹ï¼Œç™½éœ²æœªæ™ã€‚æ‰€è°“ä¼Šäººï¼Œåœ¨æ°´ä¹‹æ¹„ã€‚æº¯æ´„ä»ä¹‹ï¼Œé“é˜»ä¸”è·»ã€‚æº¯æ¸¸ä»ä¹‹ï¼Œå®›åœ¨æ°´ä¸­å»ã€‚è’¹è‘­é‡‡é‡‡ï¼Œç™½éœ²æœªå·²ã€‚æ‰€è°“ä¼Šäººï¼Œåœ¨æ°´ä¹‹æ¶˜ã€‚æº¯æ´„ä»ä¹‹ï¼Œé“é˜»ä¸”å³ã€‚æº¯æ¸¸ä»ä¹‹ï¼Œå®›åœ¨æ°´ä¸­æ²šã€‚',
                        readCount: 0
                    },
                    {
                        title: 'æ¡ƒå¤­',
                        content: 'æ¡ƒä¹‹å¤­å¤­ï¼Œç¼ç¼å…¶åã€‚ä¹‹å­äºå½’ï¼Œå®œå…¶å®¤å®¶ã€‚æ¡ƒä¹‹å¤­å¤­ï¼Œæœ‰è•¡å…¶å®ã€‚ä¹‹å­äºå½’ï¼Œå®œå…¶å®¶å®¤ã€‚æ¡ƒä¹‹å¤­å¤­ï¼Œå…¶å¶è“è“ã€‚ä¹‹å­äºå½’ï¼Œå®œå…¶å®¶äººã€‚',
                        readCount: 18
                    },
                    {
                        title: 'å‡»é¼“',
                        content: 'å‡»é¼“å…¶é•—ï¼Œè¸Šè·ƒç”¨å…µã€‚åœŸå›½åŸæ¼•ï¼Œæˆ‘ç‹¬å—è¡Œã€‚ä»å­™å­ä»²ï¼Œå¹³é™ˆä¸å®‹ã€‚ä¸æˆ‘ä»¥å½’ï¼Œå¿§å¿ƒæœ‰å¿¡ã€‚çˆ°å±…çˆ°å¤„ï¼Ÿçˆ°ä¸§å…¶é©¬ï¼Ÿäºä»¥æ±‚ä¹‹ï¼Ÿäºæ—ä¹‹ä¸‹ã€‚æ­»ç”Ÿå¥‘é˜”ï¼Œä¸å­æˆè¯´ã€‚æ‰§å­ä¹‹æ‰‹ï¼Œä¸å­å•è€ã€‚äºå—Ÿé˜”å…®ï¼Œä¸æˆ‘æ´»å…®ã€‚äºå—Ÿæ´µå…®ï¼Œä¸æˆ‘ä¿¡å…®ã€‚',
                        readCount: 0
                    },
                    {
                        title: 'é‡‡è–‡',
                        content: 'é‡‡è–‡é‡‡è–‡ï¼Œè–‡äº¦ä½œæ­¢ã€‚æ›°å½’æ›°å½’ï¼Œå²äº¦è«æ­¢ã€‚é¡å®¤é¡å®¶ï¼Œçç‹ä¹‹æ•…ã€‚ä¸é‘å¯å±…ï¼Œçç‹ä¹‹æ•…ã€‚é‡‡è–‡é‡‡è–‡ï¼Œè–‡äº¦æŸ”æ­¢ã€‚æ›°å½’æ›°å½’ï¼Œå¿ƒäº¦å¿§æ­¢ã€‚å¿§å¿ƒçƒˆçƒˆï¼Œè½½é¥¥è½½æ¸´ã€‚æˆ‘æˆæœªå®šï¼Œé¡ä½¿å½’è˜ã€‚',
                        readCount: 25
                    },
                    {
                        title: 'æœ¨ç“œ',
                        content: 'æŠ•æˆ‘ä»¥æœ¨ç“œï¼ŒæŠ¥ä¹‹ä»¥ç¼çšã€‚åŒªæŠ¥ä¹Ÿï¼Œæ°¸ä»¥ä¸ºå¥½ä¹Ÿã€‚æŠ•æˆ‘ä»¥æœ¨æ¡ƒï¼ŒæŠ¥ä¹‹ä»¥ç¼ç‘¶ã€‚åŒªæŠ¥ä¹Ÿï¼Œæ°¸ä»¥ä¸ºå¥½ä¹Ÿã€‚æŠ•æˆ‘ä»¥æœ¨æï¼ŒæŠ¥ä¹‹ä»¥ç¼ç–ã€‚åŒªæŠ¥ä¹Ÿï¼Œæ°¸ä»¥ä¸ºå¥½ä¹Ÿã€‚',
                        readCount: 0
                    },
                    {
                        title: 'é»ç¦»',
                        content: 'å½¼é»ç¦»ç¦»ï¼Œå½¼ç¨·ä¹‹è‹—ã€‚è¡Œè¿ˆé¡é¡ï¼Œä¸­å¿ƒæ‘‡æ‘‡ã€‚çŸ¥æˆ‘è€…ï¼Œè°“æˆ‘å¿ƒå¿§ï¼›ä¸çŸ¥æˆ‘è€…ï¼Œè°“æˆ‘ä½•æ±‚ã€‚æ‚ æ‚ è‹å¤©ï¼Œæ­¤ä½•äººå“‰ï¼Ÿå½¼é»ç¦»ç¦»ï¼Œå½¼ç¨·ä¹‹ç©—ã€‚è¡Œè¿ˆé¡é¡ï¼Œä¸­å¿ƒå¦‚é†‰ã€‚çŸ¥æˆ‘è€…ï¼Œè°“æˆ‘å¿ƒå¿§ï¼›ä¸çŸ¥æˆ‘è€…ï¼Œè°“æˆ‘ä½•æ±‚ã€‚æ‚ æ‚ è‹å¤©ï¼Œæ­¤ä½•äººå“‰ï¼Ÿ',
                        readCount: 10
                    },
                    {
                        title: 'é¹¿é¸£',
                        content: 'å‘¦å‘¦é¹¿é¸£ï¼Œé£Ÿé‡ä¹‹è‹¹ã€‚æˆ‘æœ‰å˜‰å®¾ï¼Œé¼“ç‘Ÿå¹ç¬™ã€‚å¹ç¬™é¼“ç°§ï¼Œæ‰¿ç­æ˜¯å°†ã€‚äººä¹‹å¥½æˆ‘ï¼Œç¤ºæˆ‘å‘¨è¡Œã€‚å‘¦å‘¦é¹¿é¸£ï¼Œé£Ÿé‡ä¹‹è’¿ã€‚æˆ‘æœ‰å˜‰å®¾ï¼Œå¾·éŸ³å­”æ˜­ã€‚è§†æ°‘ä¸æŒï¼Œå›å­æ˜¯åˆ™æ˜¯æ•ˆã€‚æˆ‘æœ‰æ—¨é…’ï¼Œå˜‰å®¾å¼ç‡•ä»¥æ•–ã€‚',
                        readCount: 0
                    },
                    {
                        title: 'æœˆå‡º',
                        content: 'æœˆå‡ºçšå…®ï¼Œä½¼äººåƒšå…®ã€‚èˆ’çªˆçº å…®ï¼ŒåŠ³å¿ƒæ‚„å…®ã€‚æœˆå‡ºçš“å…®ï¼Œä½¼äººæ‡°å…®ã€‚èˆ’å¿§å—å…®ï¼ŒåŠ³å¿ƒæ……å…®ã€‚æœˆå‡ºç…§å…®ï¼Œä½¼äººç‡å…®ã€‚èˆ’å¤­ç»å…®ï¼ŒåŠ³å¿ƒæƒ¨å…®ã€‚',
                        readCount: 14
                    },
                    {
                        title: 'ä¸œå±±',
                        content: 'æˆ‘å¾‚ä¸œå±±ï¼Œæ…†æ…†ä¸å½’ã€‚æˆ‘æ¥è‡ªä¸œï¼Œé›¶é›¨å…¶æ¿›ã€‚æˆ‘ä¸œæ›°å½’ï¼Œæˆ‘å¿ƒè¥¿æ‚²ã€‚åˆ¶å½¼è£³è¡£ï¼Œå‹¿å£«è¡Œæšã€‚èœèœè€…è ‹ï¼Œçƒåœ¨æ¡‘é‡ã€‚æ•¦å½¼ç‹¬å®¿ï¼Œäº¦åœ¨è½¦ä¸‹ã€‚æˆ‘å¾‚ä¸œå±±ï¼Œæ…†æ…†ä¸å½’ã€‚æˆ‘æ¥è‡ªä¸œï¼Œé›¶é›¨å…¶æ¿›ã€‚æœè‡ä¹‹å®ï¼Œäº¦æ–½äºå®‡ã€‚ä¼Šå¨åœ¨å®¤ï¼Œè ¨è›¸åœ¨æˆ·ã€‚ç”ºç•½é¹¿åœºï¼Œç† ç‡¿å®µè¡Œã€‚',
                        readCount: 0
                    }
                ]
            }
        ];

        // é¡µé¢ç®¡ç†
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function showHome() {
            showPage('home-page');
            renderBooks();
            renderStats();
            currentBookId = null;
        }

        function goBackToBook() {
            if (currentBookId) {
                showBookDetail(currentBookId);
            } else {
                showHome();
            }
        }

        // æ•°æ®ç®¡ç†
        function saveBooks() {
            localStorage.setItem('zenReadingBooks', JSON.stringify(books));
        }

        function initializeData() {
            if (books.length === 0) {
                // åˆå§‹åŒ–é¢„ç½®ä¹¦ç±æ•°æ®
                books = classicBooks.map(book => ({
                    ...book,
                    createdAt: new Date().toISOString(),
                    lastRead: null
                }));
                saveBooks();
            }
        }

        function addCustomBook(name, chapterContent) {
            const book = {
                id: 'custom_' + Date.now(),
                name: name,
                author: 'è‡ªå®šä¹‰',
                description: 'ç”¨æˆ·è‡ªå®šä¹‰ä¹¦ç±',
                chapters: [{
                    title: 'ç¬¬ä¸€ç« ',
                    content: chapterContent,
                    readCount: 0
                }],
                createdAt: new Date().toISOString(),
                lastRead: null
            };
            books.push(book);
            saveBooks();
            return book;
        }

        function addChapterToBook(bookId, title, content) {
            const book = books.find(b => b.id === bookId);
            if (book) {
                book.chapters.push({
                    title: title,
                    content: content,
                    readCount: 0
                });
                saveBooks();
                return true;
            }
            return false;
        }

        // æ¸²æŸ“å‡½æ•°
        function renderStats() {
            const container = document.getElementById('stats-overview');
            const totalBooks = books.length;
            const totalChapters = books.reduce((sum, book) => sum + book.chapters.length, 0);
            const completedChapters = books.reduce((sum, book) => 
                sum + book.chapters.filter(ch => ch.readCount >= 100).length, 0);
            const totalReadCount = books.reduce((sum, book) => 
                sum + book.chapters.reduce((chSum, ch) => chSum + ch.readCount, 0), 0);
            const completionRate = totalChapters > 0 ? Math.round((completedChapters / totalChapters) * 100) : 0;

            container.innerHTML = `
                <div class="stat-card">
                    <div class="stat-number">${totalBooks}</div>
                    <div class="stat-label">ç»å…¸ä¹¦ç±</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalChapters}</div>
                    <div class="stat-label">æ€»ç« èŠ‚æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${totalReadCount}</div>
                    <div class="stat-label">æ€»è¯»æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${completionRate}%</div>
                    <div class="stat-label">å®Œæˆç‡</div>
                </div>
            `;
        }

        function renderBooks() {
            const container = document.getElementById('books-container');
            const emptyState = document.getElementById('empty-state');
            
            if (books.length === 0) {
                container.innerHTML = '';
                emptyState.style.display = 'block';
                return;
            }

            emptyState.style.display = 'none';
            container.innerHTML = books.map(book => {
                const totalChapters = book.chapters.length;
                const completedChapters = book.chapters.filter(ch => ch.readCount >= 100).length;
                const totalReadCount = book.chapters.reduce((sum, ch) => sum + ch.readCount, 0);
                const overallProgress = totalChapters > 0 ? (completedChapters / totalChapters * 100) : 0;

                return `
                    <div class="zen-card" onclick="showBookDetail('${book.id}')">
                        <div class="book-title zen-heading">${book.name}</div>
                        <div class="book-stats">${completedChapters}/${totalChapters} ç« å®Œæˆ Â· æ€»è¯»æ•° ${totalReadCount}</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${overallProgress}%;"></div>
                        </div>
                        <div style="margin-top: 16px; display: flex; gap: 8px; justify-content: flex-end;">
                            <button class="zen-btn btn-secondary" style="height: 32px; padding: 0 12px; font-size: 14px;" 
                                    onclick="event.stopPropagation(); addNewChapter('${book.id}')">
                                æ·»åŠ ç« èŠ‚
                            </button>
                            <button class="zen-btn" style="height: 32px; padding: 0 12px; font-size: 14px; background: var(--error); color: white;" 
                                    onclick="event.stopPropagation(); confirmDeleteBook('${book.id}')">
                                åˆ é™¤
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showBookDetail(bookId) {
            currentBookId = bookId;
            const book = books.find(b => b.id === bookId);
            if (!book) return;

            document.getElementById('book-title').textContent = book.name;
            renderChapters(book);
            showPage('book-detail-page');
        }

        function renderChapters(book) {
            const container = document.getElementById('chapters-container');
            container.innerHTML = `
                <div style="margin-bottom: 24px;">
                    <button class="zen-btn btn-primary" onclick="addNewChapter('${book.id}')">
                        æ·»åŠ æ–°ç« èŠ‚
                    </button>
                </div>
            `;

            container.innerHTML += `
                <ul class="chapter-list">
                    ${book.chapters.map((chapter, index) => `
                        <li class="chapter-item ${chapter.readCount >= 100 ? 'completed' : ''}" 
                            onclick="showChapterReading('${book.id}', ${index})">
                            <div style="flex: 1;">
                                <div class="chapter-title">${chapter.title}</div>
                                <div class="chapter-preview">${chapter.content.substring(0, 30)}...</div>
                            </div>
                            <div style="text-align: right;">
                                <div class="chapter-count">${chapter.readCount}/100</div>
                                ${chapter.readCount >= 100 ? 
                                    '<div style="color: var(--gold-stone); margin-top: 4px;">âœ“ å·²å®Œæˆ</div>' : ''}
                            </div>
                        </li>
                    `).join('')}
                </ul>
            `;
        }

        function showChapterReading(bookId, chapterIndex) {
            const book = books.find(b => b.id === bookId);
            if (!book || !book.chapters[chapterIndex]) return;

            currentBookId = bookId;
            currentChapterIndex = chapterIndex;
            const chapter = book.chapters[chapterIndex];

            document.getElementById('chapter-title').textContent = `${chapter.title}`;
            document.getElementById('chapter-content').textContent = chapter.content;
            updateReadingProgress();
            showPage('reading-page');
        }

        // æ‰“å¡åŠŸèƒ½
        function incrementReading() {
            const book = books.find(b => b.id === currentBookId);
            if (!book || !book.chapters[currentChapterIndex]) return;

            // åˆ›å»ºæ°´å¢¨æ‰©æ•£æ•ˆæœ
            createInkRipple(event.target.closest('.floating-check-btn') || event.target);

            book.chapters[currentChapterIndex].readCount++;
            book.lastRead = new Date().toISOString();
            saveBooks();
            updateReadingProgress();
            
            // å¦‚æœè¾¾åˆ°ç›®æ ‡ï¼Œæ˜¾ç¤ºåº†ç¥åŠ¨ç”»
            if (book.chapters[currentChapterIndex].readCount === 100) {
                setTimeout(() => {
                    showCelebration();
                }, 600);
            }
        }

        function createInkRipple(button) {
            const ripple = document.createElement('div');
            ripple.className = 'ink-ripple';
            ripple.style.width = '150px';
            ripple.style.height = '150px';
            ripple.style.left = '50%';
            ripple.style.top = '50%';
            ripple.style.marginLeft = '-75px';
            ripple.style.marginTop = '-75px';
            
            button.style.position = 'relative';
            button.appendChild(ripple);
            
            setTimeout(() => {
                ripple.remove();
            }, 600);
        }

        function updateReadingProgress() {
            const book = books.find(b => b.id === currentBookId);
            if (!book || !book.chapters[currentChapterIndex]) return;

            const chapter = book.chapters[currentChapterIndex];
            document.getElementById('current-count').textContent = chapter.readCount;
        }

        // åº†ç¥åŠ¨ç”»
        function showCelebration() {
            const overlay = document.getElementById('celebration-overlay');
            overlay.style.display = 'flex';
            
            // åˆ›å»ºé‡‘è‰²ç²’å­
            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'golden-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = '100%';
                particle.style.animationDelay = Math.random() * 2 + 's';
                overlay.appendChild(particle);
            }
            
            setTimeout(() => {
                overlay.style.display = 'none';
                // æ¸…ç†ç²’å­
                overlay.querySelectorAll('.golden-particle').forEach(p => p.remove());
            }, 3000);
        }

        // ç« èŠ‚ç®¡ç†
        function addNewChapter(bookId) {
            const title = prompt('è¯·è¾“å…¥ç« èŠ‚æ ‡é¢˜ï¼š');
            if (!title) return;

            const content = prompt('è¯·è¾“å…¥ç« èŠ‚å†…å®¹ï¼š');
            if (!content) return;

            if (addChapterToBook(bookId, title, content)) {
                showBookDetail(bookId);
            }
        }

        function resetChapterProgress() {
            const book = books.find(b => b.id === currentBookId);
            if (!book || !book.chapters[currentChapterIndex]) return;

            book.chapters[currentChapterIndex].readCount = 0;
            saveBooks();
            updateReadingProgress();
            hideResetConfirm();
        }

        // ä¹¦ç±åˆ é™¤
        function confirmDeleteBook(bookId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æœ¬ä¹¦å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                books = books.filter(b => b.id !== bookId);
                saveBooks();
                renderBooks();
                renderStats();
            }
        }

        // æ¨¡æ€æ¡†ç®¡ç†
        function showSettingsModal() {
            document.getElementById('settings-modal').classList.add('active');
        }

        function hideSettingsModal() {
            document.getElementById('settings-modal').classList.remove('active');
        }

        function showAddBookModal() {
            document.getElementById('add-book-modal').classList.add('active');
        }

        function hideAddBookModal() {
            document.getElementById('add-book-modal').classList.remove('active');
            document.getElementById('add-book-form').reset();
        }

        function showResetConfirm() {
            document.getElementById('reset-modal').classList.add('active');
        }

        function hideResetConfirm() {
            document.getElementById('reset-modal').classList.remove('active');
        }

        // ç»Ÿè®¡æ•°æ®
        function showBookStats() {
            const book = books.find(b => b.id === currentBookId);
            if (!book) return;

            const totalChapters = book.chapters.length;
            const completedChapters = book.chapters.filter(ch => ch.readCount >= 100).length;
            const totalReadCount = book.chapters.reduce((sum, ch) => sum + ch.readCount, 0);
            const averageCount = totalChapters > 0 ? Math.round(totalReadCount / totalChapters) : 0;

            alert(`${book.name} ç»Ÿè®¡ï¼š

ğŸ“š ç« èŠ‚æ•°é‡ï¼š${totalChapters}ç« 
âœ… å·²å®Œæˆï¼š${completedChapters}ç« 
ğŸ“– æ€»è¯»æ•°ï¼š${totalReadCount}é
ğŸ“Š å¹³å‡è¯»æ•°ï¼š${averageCount}é/ç« èŠ‚
ğŸ¯ å®Œæˆç‡ï¼š${totalChapters > 0 ? Math.round((completedChapters / totalChapters) * 100) : 0}%`);
        }

        // ä¸»é¢˜åˆ‡æ¢
        function toggleTheme() {
            isDarkMode = !isDarkMode;
            document.body.classList.toggle('dark-mode', isDarkMode);
            localStorage.setItem('darkMode', isDarkMode);
            
            const toggle = document.getElementById('theme-toggle');
            toggle.textContent = isDarkMode ? 'åˆ‡æ¢åˆ°æ—¥é—´æ¨¡å¼' : 'åˆ‡æ¢åˆ°å¤œé—´æ¨¡å¼';
        }

        // æ•°æ®å¯¼å…¥å¯¼å‡º
        function exportData() {
            const data = {
                books: books,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `ç¦…æ„è¯µè¯»å¤‡ä»½_${new Date().toLocaleDateString().replace(/\//g, '-')}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            URL.revokeObjectURL(url);
            
            alert('æ•°æ®å¯¼å‡ºæˆåŠŸï¼è¯·å¦¥å–„ä¿å­˜å¤‡ä»½æ–‡ä»¶ã€‚');
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (confirm('å¯¼å…¥æ•°æ®å°†è¦†ç›–å½“å‰æ‰€æœ‰æ•°æ®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ')) {
                        books = data.books || [];
                        saveBooks();
                        renderBooks();
                        renderStats();
                        alert('æ•°æ®å¯¼å…¥æˆåŠŸï¼');
                    }
                } catch (error) {
                    alert('æ•°æ®æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥å¤‡ä»½æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚');
                }
            };
            reader.readAsText(file);
            
            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥
            event.target.value = '';
        }

        // è¡¨å•å¤„ç†
        document.getElementById('add-book-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('book-name').value.trim();
            const content = document.getElementById('chapter-content-input').value.trim();
            
            if (!name || !content) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯');
                return;
            }

            addCustomBook(name, content);
            hideAddBookModal();
            renderBooks();
            renderStats();
        });

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            renderBooks();
            renderStats();
            
            // åº”ç”¨ä¿å­˜çš„ä¸»é¢˜æ¨¡å¼
            if (isDarkMode) {
                document.body.classList.add('dark-mode');
                document.getElementById('theme-toggle').textContent = 'åˆ‡æ¢åˆ°æ—¥é—´æ¨¡å¼';
            }
        });

        // é”®ç›˜å¯¼èˆª
        document.addEventListener('keydown', function(e) {
            // æŒ‰ESCé”®å…³é—­æ¨¡æ€æ¡†
            if (e.key === 'Escape') {
                hideSettingsModal();
                hideAddBookModal();
                hideResetConfirm();
            }
            
            // åœ¨é˜…è¯»é¡µé¢æŒ‰ç©ºæ ¼é”®æ‰“å¡
            if (e.key === ' ' && document.getElementById('reading-page').classList.contains('active')) {
                e.preventDefault();
                incrementReading();
            }
        });

        // æ‰‹åŠ¿æ»‘åŠ¨æ”¯æŒ
        let touchStartX = 0;
        let touchEndX = 0;

        document.addEventListener('touchstart', function(e) {
            touchStartX = e.changedTouches[0].screenX;
        });

        document.addEventListener('touchend', function(e) {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });

        function handleSwipe() {
            const swipeThreshold = 50;
            const diff = touchStartX - touchEndX;

            if (Math.abs(diff) > swipeThreshold) {
                if (document.getElementById('reading-page').classList.contains('active')) {
                    const book = books.find(b => b.id === currentBookId);
                    if (book) {
                        if (diff > 0 && currentChapterIndex < book.chapters.length - 1) {
                            // å‘å·¦æ»‘åŠ¨ï¼Œä¸‹ä¸€ç« 
                            showChapterReading(currentBookId, currentChapterIndex + 1);
                        } else if (diff < 0 && currentChapterIndex > 0) {
                            // å‘å³æ»‘åŠ¨ï¼Œä¸Šä¸€ç« 
                            showChapterReading(currentBookId, currentChapterIndex - 1);
                        }
                    }
                }
            }
        }
    </script>
</body>
</html>